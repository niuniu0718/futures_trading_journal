# 快速开始指南

## 安装运行

### 方法1: 使用启动脚本（推荐）

```bash
cd futures_trading_journal
./setup.sh
```

### 方法2: 手动启动

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行应用
python app.py
```

### 方法3: 使用测试脚本

```bash
# 安装测试依赖
pip install requests

# 运行应用
python app.py &

# 在另一个终端运行测试
python test_app.py
```

## 访问系统

启动后打开浏览器访问: **http://localhost:5000**

## 使用流程

### 1. 添加交易记录

1. 点击顶部导航栏的"交易记录"
2. 点击"新建交易"按钮
3. 填写交易信息：
   - **交易日期**: 开仓日期
   - **交易所**: 选择交易所（广期所、上期所等）
   - **品种名称**: 如"碳酸锂"、"工业硅"
   - **合约代码**: 如"LC2405"
   - **方向**: 选择多单或空单
   - **开仓价格**: 开仓时的价格
   - **数量**: 交易手数或吨数
   - **止损价/止盈价**: 可选
   - **手续费**: 交易手续费
4. 填写技术指标（可选）：
   - MA5/MA10/MA20: 移动平均线
   - RSI: 相对强弱指标
   - MACD: 平滑异同移动平均线
5. 填写市场分析（可选）：
   - **市场走势**: 上涨/下跌/震荡
   - **入场理由**: 如"突破前高"、"MA金叉"
   - **交易日志**: 详细记录交易思路
6. 点击"创建"保存

### 2. 平仓操作

当交易需要平仓时：

1. 在交易列表中找到持仓中的交易（状态显示为"持仓中"）
2. 点击该行的"平仓"按钮
3. 在弹出窗口中填写：
   - **平仓价格**: 平仓时的价格
   - **平仓日期**: 平仓日期（默认今天）
4. 点击"确认平仓"
5. 系统自动计算盈亏并更新状态

**盈亏计算公式**：
- 多单盈亏 = (平仓价 - 开仓价) × 数量 - 手续费
- 空单盈亏 = (开仓价 - 平仓价) × 数量 - 手续费

### 3. 查看统计

点击"统计分析"页面查看：

**基础统计**：
- 已平仓交易数
- 盈利/亏损交易数
- 胜率

**盈亏统计**：
- 总盈亏金额
- 最大盈利
- 最大亏损
- 平均盈亏

**风险指标**：
- 最大回撤
- 平均盈利/亏损
- 盈亏比
- 期望值

**多空方向统计**：
- 多单和空单分别的
  - 交易次数
  - 总盈亏
  - 胜率
  - 平均盈亏

**图表展示**：
- 月度收益统计（柱状图）
- 品种表现对比（饼图）
- 价格走势对比（折线图）
- 胜率趋势（折线图）

### 4. 数据管理

**导出数据**：
1. 在交易记录页面点击"导出"按钮
2. 自动下载CSV文件
3. 可用Excel等工具打开分析

**导入数据**：
1. 点击"导入"按钮
2. 选择CSV文件（格式需与导出文件一致）
3. 系统自动导入交易记录

**筛选交易**：
- 按状态筛选：全部/持仓中/已平仓
- 按品种筛选：选择特定品种
- 组合筛选：状态+品种

**编辑/删除**：
- 编辑：点击"编辑"修改交易记录
- 删除：点击"删除"移除记录（需确认）

## 数据备份

数据存储在 `data/trading_journal.db` SQLite数据库文件中

**备份方法**：
```bash
# 复制数据库文件
cp data/trading_journal.db data/backup_$(date +%Y%m%d).db
```

**恢复方法**：
```bash
# 停止应用
# 恢复数据库文件
cp data/backup_20240201.db data/trading_journal.db
# 重启应用
```

## 常见问题

**Q: 端口5000被占用怎么办？**

修改 `app.py` 最后一行：
```python
app.run(host='0.0.0.0', port=5001, debug=DEBUG)
```

**Q: 如何修改配置？**

编辑 `config.py` 文件，可以修改：
- 交易所列表
- 日志级别
- 数据库路径
- 分页数量

**Q: 数据安全吗？**

建议：
1. 定期备份数据库文件
2. 不要在公网环境运行
3. 修改默认SECRET_KEY

**Q: 可以部署到服务器吗？**

可以，建议：
1. 使用 `gunicorn` 或 `uWSGI` 作为WSGI服务器
2. 配置nginx作为反向代理
3. 设置DEBUG=False
4. 使用HTTPS

## 下一步

- 添加更多交易记录，观察统计变化
- 分析不同品种的盈亏表现
- 研究多空方向的胜率差异
- 优化入场策略（基于入场理由统计）

## 技术支持

如有问题或建议，请查看 `README.md` 或提交Issue。
