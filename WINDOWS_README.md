# 期货交易记录系统 - Windows版

## 系统要求

- Windows 7/8/10/11
- Python 3.8 或更高版本
- 浏览器：Chrome、Firefox、Edge等现代浏览器

## 快速开始

### 1. 安装Python（如果尚未安装）

1. 访问 https://www.python.org/downloads/
2. 下载最新版Python安装包
3. 运行安装程序，**重要：勾选"Add Python to PATH"**
4. 完成安装后，重启命令提示符

### 2. 安装依赖

双击运行 `install.bat`，等待依赖安装完成。

**或者手动安装：**
```bash
pip install -r requirements.txt
```

### 3. 启动系统

双击运行 `start.bat`，看到以下信息表示启动成功：

```
启动期货交易记录系统...
访问地址: http://localhost:5000
```

### 4. 访问系统

在浏览器中打开：**http://localhost:5000**

## 功能说明

### 交易记录管理
- 添加交易记录（日期、品种、合约、方向、价格等）
- 查看交易列表
- 编辑/删除交易
- 平仓操作

### 价格管理
- **SMM价格**：管理现货月度价格数据
- **期货价格**：管理期货月度价格数据
- 支持Excel批量导入/导出

### 统计分析
- 累计盈亏曲线
- 品种盈亏对比
- 月度收益统计
- 胜率分析
- 最大回撤分析

### 仪表盘
- 平均开仓价（加权平均）
- 平均结算价（加权平均）
- SMM均价（支持按月份查询）
- 对比SMM折扣百分比
- 最近交易记录

## 常见问题

### Q: 启动时提示"端口被占用"
**A:** 端口5000被其他程序占用，可以：
1. 关闭占用端口的程序
2. 或修改 `app.py` 最后一行的端口号

### Q: 无法访问网页
**A:** 检查：
1. start.bat窗口是否正常运行
2. 防火墙是否阻止了Python
3. 浏览器地址是否正确：http://localhost:5000

### Q: 如何在局域网内访问？
**A:** 修改 `app.py` 最后一行：
```python
app.run(host='0.0.0.0', port=5000, debug=DEBUG)
```
然后使用本机IP地址访问，如：http://192.168.1.100:5000

### Q: 数据存储在哪里？
**A:** 所有数据存储在 `data/trading_journal.db` SQLite数据库文件中

### Q: 如何备份数据？
**A:** 复制 `data/trading_journal.db` 文件即可

### Q: 如何导出交易记录？
**A:** 在交易记录页面，可以导出为CSV格式

## 卸载

直接删除整个文件夹即可，所有数据都在程序目录内。

## 技术支持

- 系统日志会显示在start.bat窗口中
- 如遇问题，请查看错误信息

## 更新日志

### v1.0.0 (2024-02)
- 交易记录CRUD管理
- SMM价格管理（月度价格）
- 期货价格管理
- 统计分析和图表展示
- Excel批量导入/导出
- 月份选择器查询SMM均价
- 加权平均价格计算
